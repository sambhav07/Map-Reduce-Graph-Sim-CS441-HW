
# Project Title: Distributed Graph Similarity Calculation with AWS EMR

Description

This project is a comprehensive solution for Homework 1 of CS441. It involves the distributed processing of large graphs to compute similarity scores between original and perturbed graphs using AWS EMR.

# Steps and Workflow
### 1. Graph Generation
Utilized **NetGraphSim** to generate a `.ngs` file containing the original and perturbed graphs.

### 2. Parsing the .ngs File
- Parsed the `.ngs` file to load both the original and perturbed graphs.
- Extracted node objects to create shards for nodes.
- Extracted action objects from both graphs to create shards for edges.

### 3. Preprocessing for Similarity Calculation
- Used Euclidean distance for calculating similarity scores between nodes and edges.
- Extracted attribute ranges during the shard generation process to normalize values, ensuring equal importance to all properties during similarity calculation.

### 4. Map/Reduce Jobs
- **Job 1:** Calculates similarity scores for node shards.
- **Job 2:** Calculates similarity scores for edge shards.
- **Job 3:** Processes scores from the first two jobs and compares them with the golden set yaml file generated by NetGraphSim.

## Project Structure

- `src/`                 # Source files
  - `main/scala/`        # Scala application files
  - `test/scala/`        # Test files using Scalatest
  - `resources/`         # Resources related to the project
    - `output/`          # Results of the similarity calculations
- `config/`              # Configuration files for input parameters
- `logs/`                # Log files generated during execution


## How to Run the Project

You can execute the project either locally or on AWS EMR.

### Locally

#### 1. Clone the GitHub Repository
`
git clone https://github.com/sambhav07/Map-Reduce-Graph-Sim-CS441-HW.git
cd Map-Reduce-Graph-Sim-CS441-HW/`

#### 2. Build the Project
sh
Copy code
sbt clean compile
This ensures that all the dependencies from build.sbt are resolved and indexed locally.

#### 3. Set Program Arguments
Pass the program arguments from edit configurations as below:


Copy code
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/outputs/NetGraph_11-10-23-02-33-24.ngs
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/outputs/NetGraph_11-10-23-02-33-24.ngs.perturbed
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/outputs/Combinations.txt
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/src/main/resources/output_nodes
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/outputs/ActionCombinations.txt
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/src/main/resources/output_edges
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/src/main/resources/output_results
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/src/main/resources/output_results/part-00000
/Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/outputs/NetGraph_11-10-23-02-33-24.ngs.yaml
#### 4. Run the Main File
sh
Copy code
sbt run
Execute MyMain to start the project. The intermediate shards and final output files can be found at /Users/sambhavjain/Desktop/cs441-assignments/NetGameSim/src/main/resources.

### AWS EMR
Initial Setup
Create an AWS S3 bucket to host the JAR and necessary input files (i.e., .ngs and .yaml files).
Inside the bucket, create input, jar, and output folders.
Running Steps
#### 1. Build the JAR
sh
Copy code
sbt clean compile assembly
#### 2. Deploy the JAR to S3
Upload the JAR into the jar folder in the S3 bucket.

#### 3. Place Input Files on S3
Add the .ngs files for the original and perturbed graphs, along with the .yaml file.

#### 4. Invoke the EMR Cluster
Use the following arguments:

Copy code
https://graphsimilaritycs441.s3.amazonaws.com/inputs/NetGraph_09-10-23-01-05-17.ngs
https://graphsimilaritycs441.s3.amazonaws.com/inputs/NetGraph_09-10-23-01-05-17.ngs.perturbed
https://graphsimilaritycs441.s3.amazonaws.com/output/
#### 5. View the Results
After the jobs are completed, results can be viewed in the output directory in the S3 bucket.


## Output:
For a set of 50 nodes in the original and 54 nodes in the perturbed graph, the output is as follows:

![Description](https://drive.google.com/uc?export=view&id=1PzxYeyQjBLrAO-B4UJwvFwRA5L1dWfon)

![Description](https://drive.google.com/uc?export=view&id=1kRRkQtIttVO1oKkl4KLsB-ng3vcU0VjA)


